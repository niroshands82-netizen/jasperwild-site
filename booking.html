<!DOCTYPE html>
<html lang="en">
<head>
    <!-- SEO Meta -->
    <meta name="description" content="Book your Udawalawe Safari with JasperWild. Best jeep safari packages, experienced guides, and unforgettable wildlife experience in Sri Lanka.">
    <meta name="keywords" content="Udawalawe safari booking, JasperWild safari, Sri Lanka safari jeep, Udawalawe national park safari booking">
    <meta name="author" content="JasperWild Adventures">

    <!-- Open Graph -->
    <meta property="og:title" content="Book Your Safari - JasperWild">
    <meta property="og:description" content="Reserve your Udawalawe safari jeep now with JasperWild Adventures.">
    <meta property="og:image" content="https://picsum.photos/seed/jasperwild/1200/630">
    <meta property="og:url" content="https://jasperwildudawalawa.com/booking.html">
    <meta property="og:type" content="website">

    <link rel="canonical" href="https://jasperwildudawalawa.com/booking.html">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Safari - JasperWild</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CSS Variables --- */
        :root {
            --primary-color: #8B5A2B;
            --primary-dark: #6d4520;
            --secondary-color: #2C3E50;
            --accent-color: #E67E22;
            --page-bg: #F5F5DC;
            --white: #ffffff;
            --header-height: 70px;
            --success-color: #27ae60;
            --error-color: #c0392b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; color: #333; background-color: var(--page-bg); line-height: 1.6; overflow-x: hidden; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; color: var(--secondary-color); }

        /* --- Animations --- */
        .reveal-element { opacity: 0; transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .fade-up { transform: translateY(40px); }
        .zoom-in { transform: scale(0.95); }
        .reveal-element.active { opacity: 1; transform: translateY(0) scale(1); }

        /* --- Header --- */
        header { position: sticky; top: 0; background-color: rgba(255, 255, 255, 0.98); box-shadow: 0 2px 10px rgba(0,0,0,0.05); height: var(--header-height); display: flex; align-items: center; z-index: 100; border-bottom: 1px solid #eee; }
        .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; width: 100%; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: 'Playfair Display', serif; font-size: 1.5rem; font-weight: 700; color: var(--primary-color); display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .back-btn { color: var(--secondary-color); font-weight: 500; display: flex; align-items: center; gap: 5px; text-decoration: none; transition: all 0.3s; padding: 8px 16px; border-radius: 20px; background: transparent; }
        .back-btn:hover { color: var(--white); background-color: var(--primary-color); }

        /* --- Packages --- */
        #packages { padding: 100px 20px 80px; min-height: 80vh; }
        .container { max-width: 1200px; margin: 0 auto; }
        .section-title { text-align: center; margin-bottom: 60px; }
        .section-title h2 { font-size: 2.8rem; margin-bottom: 15px; position: relative; display: inline-block; }
        .section-title h2::after { content: ''; position: absolute; width: 80px; height: 3px; background-color: var(--accent-color); bottom: -15px; left: 50%; transform: translateX(-50%); border-radius: 2px; }
        .packages-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; }
        .package-card { background: #fff; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.05); transition: transform 0.4s, box-shadow 0.4s; border: 1px solid #eaeaea; display: flex; flex-direction: column; }
        .package-card:hover { transform: translateY(-10px); box-shadow: 0 20px 50px rgba(139, 90, 43, 0.15); }
        .card-img { height: 240px; overflow: hidden; background-color: #ddd; } /* Added background for missing images */
        .card-img img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease; }
        .package-card:hover .card-img img { transform: scale(1.1); }
        .card-content { padding: 30px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-meta { display: flex; justify-content: flex-end; margin-bottom: 10px; }
        .price-wrapper { display: flex; flex-direction: column; align-items: flex-end; line-height: 1.1; }
        .old-price { text-decoration: line-through; color: #999; font-size: 0.9rem; font-weight: 400; }
        .current-price { color: var(--primary-color); font-size: 1.6rem; font-weight: 700; }
        .normal-price { font-size: 1.6rem; font-weight: 700; color: var(--primary-color); }
        .card-title { font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-color); line-height: 1.3; }
        .card-desc { color: #666; margin-bottom: 25px; font-size: 0.95rem; flex-grow: 1; }
        .card-desc ul { list-style-type: none; }
        .card-desc ul li { margin-bottom: 8px; padding-left: 25px; position: relative; }
        .card-desc ul li::before { content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--accent-color); position: absolute; left: 0; top: 2px; font-size: 0.8rem; }
        .btn { margin-top: auto; display: inline-flex; align-items: center; justify-content: center; width: 100%; padding: 14px; background-color: var(--primary-color); color: var(--white); border-radius: 8px; font-weight: 500; border: none; cursor: pointer; transition: all 0.3s; font-size: 1rem; gap: 10px; }
        .btn:hover { background-color: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(139, 90, 43, 0.3); }

        /* --- Booking Form --- */
        #booking { padding: 80px 20px; background-image: linear-gradient(rgba(44, 62, 80, 0.85), rgba(44, 62, 80, 0.9)), url('https://picsum.photos/seed/elephants/1920/1080'); background-size: cover; background-position: center; background-attachment: fixed; position: relative; }
        .booking-wrapper { background: #fff; width: 100%; max-width: 700px; margin: 0 auto; padding: 45px; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.2); border-top: 6px solid var(--accent-color); position: relative; }
        .form-header { text-align: center; margin-bottom: 35px; }
        .form-header h2 { font-size: 2.2rem; margin-bottom: 10px; color: var(--secondary-color); }
        .form-group { margin-bottom: 20px; position: relative; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--secondary-color); font-size: 0.9rem; }
        input, select, textarea { width: 100%; padding: 14px 15px; border: 1px solid #e0e0e0; border-radius: 8px; font-family: inherit; font-size: 0.95rem; transition: all 0.3s; background-color: #fdfdfd; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent-color); background-color: #fff; box-shadow: 0 0 0 4px rgba(230, 126, 34, 0.1); }
        .selected-package-badge { background-color: rgba(230, 126, 34, 0.15); color: #d35400; padding: 15px; border-radius: 8px; margin-bottom: 25px; text-align: center; font-weight: 600; border: 1px dashed rgba(230, 126, 34, 0.5); display: none; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .submit-btn { width: 100%; padding: 16px; background-color: var(--secondary-color); color: var(--white); border: none; border-radius: 8px; font-size: 1.05rem; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .submit-btn:hover { background-color: #1a252f; transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .submit-btn:disabled { background-color: #95a5a6; cursor: not-allowed; transform: none; }
        .spinner { width: 20px; height: 20px; border: 3px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite; display: none; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- Toast --- */
        #notification-container { position: fixed; bottom: 30px; right: 30px; z-index: 2000; display: flex; flex-direction: column; gap: 15px; }
        .toast { background: #fff; padding: 18px 25px; border-radius: 10px; box-shadow: 0 8px 30px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 15px; min-width: 320px; transform: translateX(120%); transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); border-left: 5px solid; }
        .toast.show { transform: translateX(0); }
        .toast.success { border-left-color: var(--success-color); }
        .toast.success i { color: var(--success-color); }
        .toast.error { border-left-color: var(--error-color); }
        .toast.error i { color: var(--error-color); }

        /* Responsive */
        @media (max-width: 768px) { .form-row { grid-template-columns: 1fr; gap: 0; } .booking-wrapper { padding: 30px 20px; } #notification-container { right: 20px; left: 20px; bottom: 20px; } .toast { min-width: auto; width: 100%; } }
    </style>
</head>
<body>

    <header id="main-header">
        <div class="header-content">
            <a href="index.html" class="logo"><i class="fas fa-paw" style="color: var(--accent-color);"></i> JasperWild</a>
            <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Back to Home</a>
        </div>
    </header>

    <section id="packages">
        <div class="container">
            <div class="section-title reveal-element fade-up">
                <h2>Choose Your Safari</h2>
                <p>Select an adventure package below to begin your journey</p>
            </div>
            <div class="packages-grid">
                <!-- Package 1: 4 Hours -->
                <div class="package-card reveal-element fade-up">
                    <div class="card-img">
                        <img src="images/savanna.webp" alt="4 Hours Package">
                    </div>
                    <div class="card-content">
                        <div class="card-meta"><span class="normal-price">$ 65</span></div>
                        <h3 class="card-title">4 Hours Package</h3>
                        <div class="card-desc"><ul><li>Morning OR Evening Safari Ride</li><li>Experienced Chauffer Guide</li></ul></div>
                        <button class="btn book-now-btn" data-package="4 Hours Package">Book This Package <i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Package 2: 6 Hours -->
                <div class="package-card reveal-element fade-up" style="transition-delay: 0.1s;">
                    <div class="card-img">
                        <img src="images/predator.webp" alt="6 Hours Package">
                    </div>
                    <div class="card-content">
                        <div class="card-meta">
                            <div class="price-wrapper"><span class="old-price">$80</span><span class="current-price">$75</span></div>
                        </div>
                        <h3 class="card-title">6 Hours Package</h3>
                        <div class="card-desc"><ul><li>Food and Beverage Included</li><li>Jeep Fees Included</li></ul></div>
                        <button class="btn book-now-btn" data-package="6 Hours Package">Book This Package <i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Package 3: Full Day -->
                <div class="package-card reveal-element fade-up" style="transition-delay: 0.2s;">
                    <div class="card-img">
                        <img src="images/river.webp" alt="Full Day Package">
                    </div>
                    <div class="card-content">
                        <div class="card-meta">
                            <div class="price-wrapper"><span class="old-price">$105</span><span class="current-price">$100</span></div>
                        </div>
                        <h3 class="card-title">Full Day (11 Hours) Package</h3>
                        <div class="card-desc"><ul><li>Breakfast & Dinner Included</li><li>Lunch Included</li></ul></div>
                        <button class="btn book-now-btn" data-package="Full Day (11 Hours) Package">Book This Package <i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="booking">
        <div class="container">
            <div class="booking-wrapper reveal-element zoom-in">
                <div class="form-header">
                    <h2>Reservation Form</h2>
                    <p>Secure your spot. We will confirm availability shortly.</p>
                </div>
                <div id="packageBadge" class="selected-package-badge"><i class="fas fa-check-circle"></i> Selected: <span id="packageNameDisplay"></span></div>

                <!-- NEW ENDPOINT UPDATED HERE -->
                <form id="bookingForm" action="https://formspree.io/f/mnjbjagz" method="POST">
                    <div class="form-row">
                        <div class="form-group"><label>Full Name</label><input type="text" name="name" required placeholder="John Doe"></div>
                        <div class="form-group"><label>Email Address</label><input type="email" name="email" required placeholder="john@example.com"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label>Phone Number</label><input type="tel" name="phone" placeholder="+94 7X XXX XXXX"></div>
                        <div class="form-group"><label>Persons</label><input type="number" name="persons" min="1" required placeholder="2"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label>Date From</label><input type="date" id="date-from" name="date-from" required></div>
                        <div class="form-group"><label>Date To</label><input type="date" id="date-to" name="date-to" required></div>
                    </div>
                    <div class="form-group">
                        <label>Package</label>
                        <select name="package" id="package-select" required>
                            <option value="" disabled selected>Choose a package...</option>
                            <option value="4 Hours Package">4 Hours Package ($65)</option>
                            <option value="6 Hours Package">6 Hours Package ($75)</option>
                            <option value="Full Day (11 Hours) Package">Full Day Package ($100)</option>
                            <option value="Custom Inquiry">Custom Inquiry</option>
                        </select>
                    </div>
                    <div class="form-group"><label>Message</label><textarea name="message" rows="4" placeholder="Additional requests..."></textarea></div>
                    <input type="hidden" name="_subject" value="New JasperWild Booking">
                    <button type="submit" class="submit-btn" id="submitBtn"><span class="btn-text">Confirm Booking</span><div class="spinner"></div></button>
                </form>
            </div>
        </div>
    </section>

    <footer>&copy; 2026 JasperWild Adventures. All Rights Reserved.</footer>
    <div id="notification-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. Date Logic ---
            const dateFrom = document.getElementById('date-from');
            const dateTo = document.getElementById('date-to');
            
            const getTodayDate = () => {
                const today = new Date();
                return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
            };
            dateFrom.setAttribute('min', getTodayDate());
            dateTo.setAttribute('min', getTodayDate());

            dateFrom.addEventListener('change', (e) => {
                dateTo.setAttribute('min', e.target.value);
                if (dateTo.value && dateTo.value < e.target.value) dateTo.value = '';
            });

            // --- 2. Auto-Select Package ---
            const packageSelect = document.getElementById('package-select');
            const badge = document.getElementById('packageBadge');
            const badgeName = document.getElementById('packageNameDisplay');
            
            // From URL
            const urlParams = new URLSearchParams(window.location.search);
            if(urlParams.get('p')) {
                const p = urlParams.get('p');
                packageSelect.value = p;
                badge.style.display = 'block'; badgeName.innerText = p;
            }

            // From Buttons
            document.querySelectorAll('.book-now-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const p = btn.getAttribute('data-package');
                    packageSelect.value = p;
                    badge.style.display = 'block'; badgeName.innerText = p;
                    document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
                });
            });

            // --- 3. Scroll Animations ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if(entry.isIntersecting) entry.target.classList.add('active');
                });
            });
            document.querySelectorAll('.reveal-element').forEach(el => observer.observe(el));

            // --- 4. FORM SUBMISSION ---
            const form = document.getElementById('bookingForm');
            const submitBtn = document.getElementById('submitBtn');
            const btnText = submitBtn.querySelector('.btn-text');
            const spinner = submitBtn.querySelector('.spinner');

            function showToast(type, title, message) {
                const container = document.getElementById('notification-container');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.innerHTML = `<i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i><div class="toast-content"><div class="toast-title">${title}</div><div class="toast-msg">${message}</div></div>`;
                container.appendChild(toast);
                requestAnimationFrame(() => toast.classList.add('show'));
                setTimeout(() => { toast.classList.remove('show'); setTimeout(() => toast.remove(), 500); }, 5000);
            }

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                console.log("Starting submission...");

                // UI Loading
                btnText.style.display = 'none';
                spinner.style.display = 'block';
                submitBtn.disabled = true;

                const data = new FormData(form);
                console.log("Data collected:", data);

                fetch(form.action, {
                    method: 'POST',
                    body: data,
                    headers: { 'Accept': 'application/json' }
                })
                .then(response => {
                    console.log("Server response received:", response);
                    if (response.ok) {
                        showToast('success', 'Success', 'Booking sent! We will contact you soon.');
                        form.reset();
                        badge.style.display = 'none';
                    } else {
                        response.json().then(err => {
                            console.error("Server Error:", err);
                            showToast('error', 'Submission Error', err.errors ? err.errors[0].message : 'Something went wrong.');
                        }).catch(() => {
                            showToast('error', 'Error', 'Server returned an error (Status: ' + response.status + ')');
                        });
                    }
                })
                .catch(error => {
                    console.error("Fetch Error:", error);
                    showToast('error', 'Connection Error', 'Please check your internet connection.');
                })
                .finally(() => {
                    btnText.style.display = 'inline';
                    spinner.style.display = 'none';
                    submitBtn.disabled = false;
                });
            });
        });
    </script>
</body>
</html>
